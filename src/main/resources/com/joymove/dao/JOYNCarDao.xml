<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.joymove.dao.JOYNCarDao">

	<sql id="userColumn">
		*
	</sql>
	
	<insert id="insertCar" parameterType="JOYNCar">
	     insert into JOY_NCar (vinNum,RSAPubKey,RSAPriKey,registerState) values (#{vinNum},#{RSAPubKey},#{RSAPriKey},#{registerState}); 
	</insert>


	<update id="updateCarLockState" parameterType="JOYNCar">
		update JOY_NCar set lockState=#{lockState}
		<where>
			vinNum = #{vinNum}
		</where>
	</update>

	
	<update id="updateCarRegisterState" parameterType="JOYNCar">
	     update JOY_NCar set registerState=#{registerState} 
	        <where>
	               vinNum = #{vinNum}
	        </where>
	</update>
	
	
	<select id="getNeededCar" resultType="JOYNCar" parameterType="map">
	     select  <include refid="userColumn"/> from
	     JOY_NCar u  
	     <trim suffixOverrides="and">
	          <where>
	                    <if test="vinNum!=null">vinNum=#{vinNum}  and  </if>
	           </where>
         </trim>
	</select>
	
	
	
	
	

	
</mapper>	