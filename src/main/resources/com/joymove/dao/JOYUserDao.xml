<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.joymove.dao.JOYUserDao">

	<sql id="userColumn"> * </sql>
	<sql id="likeCondition"> like </sql>

	<insert id="insertJOYUser" parameterType="JOYUser" useGeneratedKeys="false">
			insert into JOY_Users(mobileNo,userpwd) values(#{mobileNo},#{userpwd});
	</insert>

	<select id="getJOYUserByPhone" resultType="JOYUser" parameterType="map">
		select *
		from JOY_Users u
		<where>u.mobileNo=#{mobileNo}</where>
	</select>


	<update id="updateJOYUser" parameterType="JOYUser">
		update JOY_Users set 
		<trim suffixOverrides=",">
	                    <if test="userpwd!=null">userpwd=#{userpwd}, </if>
                        <if test="mobileNo!=null">mobileNo=#{mobileNo}, </if>
                        <if test="email!=null">email=#{email},</if>
                        <if test="failedTimes!=null">failedTimes=#{failedTimes},</if>
                        <if test="lockedTime!=null">lockedTime=#{lockedTime},</if>
                        <if test="pushKey!=null">pushKey=#{pushKey},</if>
                        <if test="authToken!=null">authToken=#{authToken},</if>
                        <if test="lastActiveTime!=null">lastActiveTime=#{lastActiveTime},</if>
                        <if test="username!=null">username=#{username},</if>
	                   	<if test="gender!=null">gender=#{gender},</if>
	                   	<if test="authenticateDriver!=null">authenticateDriver=#{authenticateDriver},</if>	
	                   	<if test="homeAddr">homeAddr=#{homeAddr},</if>
	                   	<if test="homeLatitude">homeLatitude=#{homeLatitude},</if>
	                   	<if test="homeLongitude">homeLongitude=#{homeLongitude},</if>
	                   	<if test="corpAddr">corpAddr=#{corpAddr},</if>
	                   	<if test="corpLatitude">corpLatitude=#{corpLatitude},</if>
	                   	<if test="corpLongitude">corpLongitude=#{corpLongitude},</if>
	                   	<if test="deposit">deposit=#{deposit},</if>
						<if test="face_info">face_info=#{face_info},</if>
						<if test="voice_info">voice_info=#{voice_info},</if>
         </trim>
   		 <trim suffixOverrides="or">
         			    <where>
	                            <if test="mobileNo!=null">
	                                mobileNo=#{mobileNo}        
	                            </if>
	     				</where>
	     </trim>

	</update>
	
	

	<select id="getAllJOYUser" resultType="JOYUser" parameterType="map">
		select <include refid="userColumn"/>
		from JOY_Users u
		<trim suffixOverrides="and">
			<where>
				<if test="mobileNo!=null">mobileNo=#{mobileNo} and </if>
				<if test="email!=null">email=#{email} and</if>
				<if test="userpwd!=null">userpwd=#{userpwd} and </if>
				<if test="authToken!=null">authToken=#{authToken} and </if>
			</where>
		</trim>
		<if test="page!=null and pageCount!=null">
			limit #{page}, #{pageCount}
		</if>
	</select>


</mapper>



















